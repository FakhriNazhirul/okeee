<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kopi Nusantara</title>
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Additional styles for debugging */
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      padding: 15px 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      display: flex;
      align-items: center;
      gap: 10px;
      z-index: 10000;
      transform: translateX(150%);
      transition: transform 0.3s ease;
    }
    .notification.show {
      transform: translateX(0);
    }
    .notification-success {
      border-left: 4px solid #4CAF50;
    }
    .notification-error {
      border-left: 4px solid #f44336;
    }
    .notification-warning {
      border-left: 4px solid #ff9800;
    }
    .notification-info {
      border-left: 4px solid #2196F3;
    }
  </style>
</head>
<body>

    <div class="navbar">
    <div class="navbar-container">
        <div class="logo-container">
        <img src="assets/coffee-cup_16590132.png" alt="Logo Kopi Nusantara" />
        <p>Kopi Nusantara</p>
        </div>
      <div class="nav">
        <ul>
          <li><a href="#">Beranda</a></li>
          <li><a href="#menu-spesial">Menu</a></li>
          <li><a href="#tentang-kami">Tentang</a></li>
          <li><a href="#kontak-kami">Kontak</a></li>
        </ul>
      </div>
      <div class="button">
      <a href="javascript:void(0)" class="btn" id="loginAdminBtn">Login Admin</a>
      </div>  
    </div>
  </div>

  <main class="hero-section">
      <div class="beranda">
        <h2>Selamat Datang di Kopi Nusantara </h2>
        <p>Nikmati pengalaman kopi terbaik dengan biji kopi pilihan dari seluruh Nusantara, 
          diseduh dengan sempurna oleh barista profesional kami</p>
        <a href="javascript:void(0)" class="btn-menu" onclick="openMenuPage()">Lihat Menu</a>
      </div>
    </main>

  <!-- Modal/Popup untuk Quick View -->
  <div id="menu-modal" class="menu-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Detail Menu</h2>
        <button class="close-modal" onclick="closeModal()">&times;</button>
      </div>
      <div class="modal-body" id="modal-body">
        <!-- Content akan diisi oleh JavaScript -->
      </div>
    </div>
  </div>

  <!-- Container untuk halaman menu -->
  <div id="menu-page" class="menu-page" style="display: none;">
    <div class="menu-page-header">
      <h1>Menu Kopi Nusantara</h1>
      <p>Pilih kategori untuk melihat menu yang tersedia</p>
    </div>

    <div class="menu-page-nav">
      <button class="menu-category-btn active" onclick="filterMenu('all')">
        <i class="fas fa-utensils"></i> Semua Menu
      </button>
      <button class="menu-category-btn" onclick="filterMenu('coffee')">
        <i class="fas fa-coffee"></i> Kopi
      </button>
      <button class="menu-category-btn" onclick="filterMenu('non-coffee')">
        <i class="fas fa-glass-whiskey"></i> Non-Kopi
      </button>
      <button class="menu-category-btn" onclick="filterMenu('makanan')">
        <i class="fas fa-hamburger"></i> Makanan
      </button>
    </div>

    <div class="search-container">
      <div class="search-box">
        <i class="fas fa-search"></i>
        <input type="text" id="menu-search" placeholder="Cari menu..." onkeyup="searchMenu()">
        <button class="clear-search" onclick="clearSearch()" style="display: none;">
          <i class="fas fa-times"></i>
        </button>
      </div>
    </div>

    <div class="menu-page-content">
      <div id="menu-items-container" class="menu-items-grid">
        <!-- Menu items akan ditampilkan di sini -->
        <div class="loading-menu">
          <div class="spinner"></div>
          <p>Memuat menu...</p>
        </div>
      </div>
    </div>
  </div>

  <section class="menu-navigation" id="menu-spesial">
    <div class="menu-nav-container">
      <div class="menu-nav-header">
        <h2>Menu Kami</h2>
        <p>Jelajahi berbagai pilihan makanan dan minuman yang kami sediakan</p>
      </div>
      
      <div class="menu-nav-cards">
        <!-- Card Minuman -->
        <div class="menu-nav-card" onclick="openMenuPage('drinks')">
          <div class="nav-card-icon">ü•§</div>
          <h3>Minuman</h3>
          <p>Kopi spesial & minuman menyegarkan</p>
          <span class="nav-card-sub">Kopi ‚Ä¢ Non-Kopi</span>
        </div>
        
        <!-- Card Makanan -->
        <div class="menu-nav-card" onclick="openMenuPage('food')">
          <div class="nav-card-icon">üçΩÔ∏è</div>
          <h3>Makanan</h3>
          <p>Snack dan pastry lezat</p>
          <span class="nav-card-sub">Snack ‚Ä¢ Pastry</span>
        </div>

        <!-- Card Semua Menu -->
        <div class="menu-nav-card" onclick="openMenuPage()">
          <div class="nav-card-icon">üìã</div>
          <h3>Semua Menu</h3>
          <p>Lihat semua menu yang tersedia</p>
          <span class="nav-card-sub">Minuman ‚Ä¢ Makanan</span>
        </div>
      </div>
    </div>
  </section>

  <section class="tentang" id="tentang-kami">
  <div class="tentang-content">
    <div class="tentang-text">
      <p class="judul">Tentang Kami</p>
      <p>
       Kopi Nusantara lahir dari hasrat untuk menghadirkan pengalaman kopi terbaik bagi para pecinta cita rasa sejati.
       Kami memilih biji kopi terbaik dari berbagai penjuru Nusantara, dipanggang dengan sempurna.
      </p>
      <p>
        Bagi kami, kopi bukan sekadar minuman, melainkan perjalanan rasa dan makna.
      </p>
    </div>

    <div class="stat-container">
      <div class="stat-card">
        <div class="stat-icon"><img src="assets/9336950.png" alt="Icon Menu"></div>
        <div class="stat-number">50+</div>
        <div class="stat-label">Menu Kopi</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><img src="assets/7208687_application_clock_time_watch_alarm_icon.png" alt="Icon Jam"></div>
        <div class="stat-number">5 Tahun</div>
        <div class="stat-label">Pengalaman</div>
      </div>
      <div class="stat-card">
        <div class="stat-icon"><img src="assets/1221688_coffee_drink_kitchen_tea_beverage_icon.png" alt="Icon Pelanggan"></div>
        <div class="stat-number">1000+</div>
        <div class="stat-label">Pelanggan</div>
      </div>
    </div>
  </div>
  <div class="tentang-image">
    <img src="https://images.unsplash.com/photo-1670404161009-29548c027d06?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&q=80&w=1080" alt="Barista">
  </div>
</section>

<section class="kontak" id="kontak-kami">
  <div class="kontak-content">
    <div class="kontak-text">
      <h2 class="judul">Kunjungi Kami</h2>
      <p>Kami siap melayani Anda setiap hari</p>
    </div>
    <div class="kontak-container">
      <div class="kontak-card">
        <div class="kontak-icon"><img src="https://img.icons8.com/arcade/64/map-marker.png" alt="Lokasi"></div>
        <div class="kontak-caption"><p>Lokasi</p><p>Jl. Kopi Nikmat No. 123<br>Bekasi</p></div>
      </div>
      <div class="kontak-card">
        <div class="kontak-icon"><img src="https://img.icons8.com/pin/100/alarm-clock.png" alt="Jam"></div>
        <div class="kontak-caption"><p>Jam Buka</p><p>Senin - Jumat: 07.00 - 22.00<br>Sabtu - Minggu: 08.00 - 23.00</p></div>
      </div>
      <div class="kontak-card">
        <div class="kontak-icon"><img src="https://img.icons8.com/external-itim2101-flat-itim2101/64/external-mail-human-resource-itim2101-flat-itim2101.png" alt="Email"></div>
        <div class="kontak-caption"><p>Kontak</p><p>üìû +62 812-3456-7890<br>‚úâÔ∏è info@kopinusantara.com</p></div>
      </div>
    </div>
  </div>
</section>

<section class="copyright">
  <div class="copyright-content">
    <img src="assets/1221688_coffee_drink_kitchen_tea_beverage_icon.png" alt="Logo"> Kopi Nusantara
  </div>
  <p class="copyright-teks">Menghadirkan cita rasa kopi terbaik dari nusantara untuk anda</p>
  <p class="copyright-utama">¬© 2025 Kopi Nusantara</p>
</section>

<!-- Scripts -->
<script src="js/api.js"></script>
<script src="js/menu.js"></script>
<script src="js/cart-system.js"></script>
<script>
    // Fungsi untuk mengecek status login admin
    function checkAdminLoginStatus() {
        const authData = localStorage.getItem('auth') || sessionStorage.getItem('auth');
        
        if (!authData) {
            return false;
        }
        
        try {
            const auth = JSON.parse(authData);
            
            // Cek apakah data valid dan belum expired
            if (auth.isLoggedIn && auth.role === 'admin') {
                // Cek expiry time (1 jam)
                if (auth.loginTime) {
                    const loginTime = new Date(auth.loginTime);
                    const currentTime = new Date();
                    const timeDiff = (currentTime - loginTime) / (1000 * 60 * 60); // dalam jam
                    
                    if (timeDiff < 1) { // Session masih valid (kurang dari 1 jam)
                        return true;
                    } else {
                        // Session expired, hapus data
                        localStorage.removeItem('auth');
                        sessionStorage.removeItem('auth');
                        return false;
                    }
                }
                return true;
            }
        } catch (error) {
            console.error('Error checking login status:', error);
        }
        
        return false;
    }
    
    // Fungsi untuk handle klik tombol Login Admin
    function handleAdminLoginClick() {
        if (checkAdminLoginStatus()) {
            // Sudah login, langsung ke dashboard
            window.location.href = '/admin/dashboard.html';
        } else {
            // Belum login, arahkan ke halaman login
            window.location.href = 'login.html';
        }
    }
    
    // Inisialisasi setelah semua script dimuat
    document.addEventListener('DOMContentLoaded', function() {
        console.log('üöÄ Website Kopi Nusantara loaded');
        
        // Setup tombol Login Admin
        const loginAdminBtn = document.getElementById('loginAdminBtn');
        if (loginAdminBtn) {
            loginAdminBtn.addEventListener('click', handleAdminLoginClick);
        }
        
        // Setup event untuk floating cart icon
        const floatingCart = document.querySelector('.cart-icon-floating');
        if (floatingCart) {
            floatingCart.addEventListener('click', function() {
                const cart = JSON.parse(localStorage.getItem('cart')) || [];
                if (cart.length === 0) {
                    alert('Keranjang masih kosong. Silakan pilih menu terlebih dahulu.');
                } else {
                    window.location.href = 'cart.html';
                }
            });
        }
        
        // Animasi untuk floating cart ketika item ditambahkan
        window.addEventListener('cartUpdated', function() {
            const floatingCart = document.querySelector('.cart-icon-floating');
            if (floatingCart) {
                floatingCart.style.transform = 'scale(1.2)';
                setTimeout(() => {
                    floatingCart.style.transform = 'scale(1)';
                }, 300);
            }
        });
        
        // Debug: Test assets folder
        setTimeout(() => {
            console.log('üîç Testing assets folder access...');
            fetch('assets/coffee-cup_16590132.png', { method: 'HEAD' })
                .then(res => console.log(`‚úÖ Assets folder accessible: ${res.status}`))
                .catch(err => console.error(`‚ùå Assets folder error: ${err.message}`));
        }, 1000);
    });
</script>
</body>
</html>